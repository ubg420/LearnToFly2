<!doctype html>
<html lang="en">
	<head>
		<title>Waffle</title>
		<link rel="stylesheet" href="waflash.css">
		<script>
			var gameConfig = {
				swfUrl: location.href.substring(0, location.href.lastIndexOf('/')) + "/" + "learntofly2.swf"
			}
		</script>
	</head>
	<body>
		<div id="waflashContainer">
			<canvas class="waflashCanvas" id="canvas" tabindex="1"></canvas>
			<div id="waflashStatus" style="display: none;">Playing...</div>
			<script>
				var ua = navigator.userAgent.toLowerCase();
				if ((navigator.appName == 'Netscape' && ua.indexOf('trident') != -1) || (ua.indexOf("msie") != -1)) {
					var waf = document.getElementById('waflashStatus');
					waf.style.display = 'block';
					waf.innerText = 'Oooops.';
				}
			</script>
			<script type="module" crossorigin="anonymous">
				let is_mobile = /Mobi/i.test(window.navigator.userAgent);
				if (is_mobile) {
					function scrollToSubject() {
						try {
							window.scrollTo({
								top: 100,
								left: 0,
								behavior: 'smooth'
							});
						} catch (e) {}
					}
					scrollToSubject();
					window.addEventListener("orientationchange", function() {
						setTimeout(scrollToSubject, 100);
					});
				} else {
					document.getElementById('canvas').focus();
				}
				document.getElementById('canvas').addEventListener("keydown", function(ev) {
					ev.preventDefault();
					ev.stopPropagation();
				});
				document.getElementById('canvas').addEventListener("click", function() {
					document.getElementById('canvas').focus();
				});
				document.addEventListener("mousedown", (function() {
					const canvasElement = document.getElementById('canvas');
					let focused = false;
					return function(ev) {
						if (ev.target == canvasElement) {
							if (!focused) {
								canvasElement.focus();
								focused = true;
							}
						} else {
							if (focused) {
								focused = false;
							}
						}
						return true;
					}
				})());

				var golddate = Date;
				Date.now = function() {
					var a = new golddate();
					a.setFullYear('2022');
					a.setMonth('06');
					a.setDate('01');
					return a.getTime();
				}

				import {
					createWaflash
				} from './js/waflash-player.min.js?15';
				createWaflash(gameConfig.swfUrl, window.wafOptions || {});
			</script>
		</div>
	</body>
</html>